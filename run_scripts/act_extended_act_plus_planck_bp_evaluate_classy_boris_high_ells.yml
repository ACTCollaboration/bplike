debug: False
timing: True
# boss 100mJy
# deep56 15mJy


likelihood:
  bplike.act100_act_TT_plus_planck_TT:
    stop_at_error: True
    bandpass: True

  bplike.act15_act_TT_plus_planck_TT:
    stop_at_error: True
    bandpass: True


params:

  theta_MC_100:
    prior:
      min: 0.5
      max: 10
    ref:
      dist: norm
      loc: 1.04109
      scale: 0.0004
    proposal: 0.0002
    latex: 100\theta_\mathrm{MC}
    drop: true
    renames: theta

  100*theta_s:
    value: 'lambda theta_MC_100: theta_MC_100'
    derived: false

  logA:
    prior:
      min: 2
      max: 4
    ref:
      dist: norm
      loc:   3.1
      scale: 0.001
    proposal: 0.001
    drop: True
    latex: \log(10^{10} A_\mathrm{s})


  A_s:
    value: "lambda logA: 1e-10*np.exp(logA)"
    latex: A_\mathrm{s}
  n_s:
    prior:
      min: 0.8
      max: 1.2
    ref:
      dist: norm
      loc:   0.96
      scale: 0.004
    proposal: 0.002
    latex: n_\mathrm{s}
  omega_b:
    prior:
      min: 0.005
      max: 0.1
    ref:
      dist: norm
      loc:   0.0221
      scale: 0.0001
    proposal: 0.0001
    latex: \Omega_\mathrm{b}h^2

  omega_cdm:
    prior:
      min: 0.001
      max: 0.99
    ref:
      dist: norm
      loc:   0.12
      scale: 0.001
    proposal: 0.0005
    latex: \Omega_\mathrm{c}h^2
  tau_reio:
    prior:
      min: 0.01
      max: 0.8
    ref:
      dist: norm
      loc:   0.065
      scale: 0.01
    proposal: 0.005
    latex: \tau_\mathrm{reio}

  H0:
    latex: H_0
  sigma8:
    latex: \sigma_8

  a_tsz: #0.5806115E+01
    latex: a_\mathrm{tSZ}
    prior:
      max: 10
      min: 0
    proposal: 0.2
    ref:
      dist: norm
      loc: 0.5806115E+01
      scale: 0.5


  a_ksz: #0.1024734E-03
    latex: a_\mathrm{kSZ}
    prior:
      max: 10
      min: 0
    proposal: 0.5
    ref:
      dist: norm
      loc: 0.1024734E-03
      scale: 0.5


  xi: #0.1998220E+00
    latex: \xi^{tSZ-CIB}
    prior:
      max: 0.2
      min: 0
    proposal: 0.05
    ref:
      dist: norm
      loc: 0.1998220E+00
      scale: 0.05

  a_d: #0.6872966E+01
    latex: a_\mathrm{d}
    prior:
      max: 11
      min: 0
    proposal: 1
    ref:
      dist: norm
      loc: 0.6872966E+01
      scale: 1

  a_c:
    latex: a_\mathrm{c}
    prior:
      max: 15
      min: 0
    proposal: 1
    ref:
      dist: norm
      loc: 4.9
      scale: 1

  beta_CIB: #0.2447908E+01
    latex: \beta_c
    prior:
      max: 5
      min: 0
    proposal: 0.2
    ref:
      dist: norm
      loc: 2.2
      scale: 0.5


  a_p_tt_15:  #0.3682240E+01
    latex: a_\mathrm{p,TT,15}
    prior:
      max: 6
      min: 0
    proposal: 0.4
    ref:
      dist: norm
      loc: 3.1
      scale: 0.5

  a_p_tt_100: #0.2249012E+02
    latex: a_\mathrm{p,TT,100}
    prior:
      max: 40
      min: 0.0
    proposal: 3
    ref:
      dist: norm
      loc: 22.5
      scale: 6

  a_g_tt_15: #0.2811710E+01
    latex: a_g_tt_15
    prior:
      max: 5
      min: 0.0
    proposal: 0.4
    ref:
      dist: norm
      loc: 0.2811710E+01
      scale: 0.4

  a_g_tt_100: #0.8717251E+01
    latex: a_g_tt_100
    prior:
      max: 20.
      min: 0.0
    proposal: 0.3
    ref:
      dist: norm
      loc: 0.8717251E+01
      scale: 0.3


  cal_150: #1.
    latex: c_{150}
    prior:
      max: 11
      min: 0.0
    proposal: 0.01
    ref:
      dist: norm
      loc: 1
      scale: 0.02
    # drop: true

  cal_090: #1.
    latex: c_{90}
    prior:
      max: 11
      min: 0.0
    proposal: 0.01
    ref:
      dist: norm
      loc: 1
      scale: 0.02
      scale: 0.02
    # drop: true

  cal_100: #1.
    latex: c_{100}
    prior:
      max: 11
      min: 0.0
    proposal: 0.01
    ref:
      dist: norm
      loc: 1
      scale: 0.02
    # drop: true

  cal_143: #1.
    latex: c_{143}
    prior:
      max: 11
      min: 0.0
    proposal: 0.01
    ref:
      dist: norm
      loc: 1
      scale: 0.02
    # drop: true

  cal_217: #1.
    latex: c_{217}
    prior:
      max: 11
      min: 0.0
    proposal: 0.01
    ref:
      dist: norm
      loc: 1
      scale: 0.02
    # drop: true

  cal_353: #1.
    latex: c_{353}
    prior:
      max: 11
      min: 0.0
    proposal: 0.01
    ref:
      dist: norm
      loc: 1
      scale: 0.02
    # drop: true

  cal_545: #1.
    latex: c_{545}
    prior:
      max: 11
      min: 0.0
    proposal: 0.01
    ref:
      dist: norm
      loc: 1
      scale: 0.02
    # drop: true



prior:
  tau_reio_prior: "lambda tau_reio: stats.norm.logpdf(tau_reio, loc=0.065, scale=0.015)"
  a_c_prior: "lambda a_c: stats.norm.logpdf(a_c, loc=4.9, scale=0.9)"
  a_p_tt_15_prior: "lambda a_p_tt_15: stats.norm.logpdf(a_p_tt_15, loc=3.1, scale=0.4)"
  a_g_tt_15_prior: "lambda a_g_tt_15: stats.norm.logpdf(a_g_tt_15, loc=2.79, scale=0.45)"
  a_g_tt_100_prior: "lambda a_g_tt_100: stats.norm.logpdf(a_g_tt_100, loc=8.77, scale=0.30)"

theory:
  classy:
    path: /Users/boris/Work/CLASS-SZ/SO-SZ/class_public
    extra_args:

      perturbations_verbose: 0
      thermodynamics_verbose: 0
      background_verbose: 0
      harmonic_verbose: 0
      fourier_verbose : 0
      input_verbose : 0
      lensing_verbose : 0
      # The base model features two massless
      # and one massive neutrino with m=0.06eV.
      # The settings below ensures that Neff=3.046
      # and m/omega = 93.14 eV
      N_ur : 2.0328
      N_ncdm : 1
      m_ncdm : 0.06
      T_ncdm : 0.71611
      YHe: 'BBN'


sampler:
  # Example for evaluating at a specific point
  evaluate:
    override:
      theta_MC_100: 1.045
      logA: 3.05
      n_s : 0.956159
      omega_b : 0.022219
      omega_cdm : 0.119883
      tau_reio : 0.0754047

      # foreground paramateres
      a_tsz:    0.5806115E+01 ##3.3 OK CHECKED
      a_ksz:   0.1024734E-03 #4.950210 OK CHECKED
      xi:   0.1998220E+00 #1.654936e-2 OK CHECKED
      a_d:   0.6872966E+01 #6.9 OK CHECKED
      a_p_tt_15:   0.3682240E+01 #3.1
      a_p_tt_100:   0.2249012E+02 #24.6
      a_c:    0.3648102E+01 #4.9 OK CHECKED


      a_g_tt_15: 0.2811710E+01
      a_g_tt_100:  0.8717251E+01
      beta_CIB : 0.2447908E+01

      cal_090: 1.
      cal_150: 1.
      cal_100: 1.
      cal_143: 1.
      cal_217: 1.
      cal_353: 1.
      cal_545: 1.


output: chains/act_extended_act_plus_planck_bp_high_ells
resume: True
